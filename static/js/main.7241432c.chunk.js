(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(3),o=a.n(s),r=(a(17),a(19),a(7)),c=a(8),l=a(4),m=a(5),u=a(9),p=a(6),h=a(10),y=a(1),g=function(e){var t=parseInt(60*e%60);return(e=parseInt(~~e))+"h "+t+"m "},d=36e4,v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).deleteActivities=function(){window.confirm("Are you sure to delete activity?")&&a.setState(function(e){return{activities:[]}})},a.handleNotifications=function(){if("Notification"in window){var e=Object(y.a)(Object(y.a)(a));Notification.requestPermission(function(t){var a=!0,i=!0;if("granted"===t&&setInterval(function(){var t=new Date;0===t.getHours()&&(a=!0,i=!0),8===t.getHours()&&a&&(e.nonPersistentNotification("Let's plan your day!"),a=!1),22===t.getHours()&&i&&(e.nonPersistentNotification("Let's sum up your day"),i=!1)},d),"default"===t)return alert("If you want to get reminder notifications please enable notifications")})}else console.log("Notification API not supported!")},a.addActivity=function(){return 0===a.state.newActivityDescription.length?alert("Insert description first."):0===a.state.newActivityTime?alert("Insert time first in proper format."):a.getTimeAvailable()-a.state.newActivityTime<0?alert("You went over 24h time!"):void a.setState(function(e){return{activities:[].concat(Object(c.a)(e.activities),[{id:e.activities.length,description:e.newActivityDescription,isDone:!1,time:a.state.newActivityTime,timeString:g(a.state.newActivityTime)}]),newActivityTimeString:"0h 0m",newActivityDescription:""}})},a.deleteActivity=function(e){window.confirm("Are you sure to delete activity?")&&a.setState(function(t){return{activities:t.activities.filter(function(t){return t.id!==e.id})}})},a.getActivitesTimeSum=function(){if(0===a.state.activities.length)return 0;var e=0;return a.state.activities.forEach(function(t){e+=t.time}),e},a.getTimeAvailable=function(){return 24-a.state.sleepHours-a.getActivitesTimeSum()},a.getTimeUsed=function(){return a.state.sleepHours+a.getActivitesTimeSum()},a.getProgressBarStatus=function(){return~~(a.getTimeUsed()/24*100)},a.handleNewActivityTime=function(e){a.setState({newActivityTimeString:e}),a.setState({newActivityTime:a.parseTimeStringToHourFloat(e)})},a.state={sleepHours:Number(localStorage.getItem("sleepHours"))||6,isHappyWithDay:JSON.parse(localStorage.getItem("isHappyWithDay"))||!1,happyDaysDates:JSON.parse(localStorage.getItem("happyDaysDates"))||{},resetOnNewDay:JSON.parse(localStorage.getItem("resetOnNewDay"))||!1,newActivityTime:"",newActivityTimeString:"0h 0m",newActivityDescription:"",happyNotes:localStorage.getItem("happyNotes")||"",sadNotes:localStorage.getItem("sadNotes")||"",activities:JSON.parse(localStorage.getItem("activities"))||[{id:1,description:"Be happy",isDone:!1,time:1,timeString:g(1)}]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=(new Date).toISOString().substring(0,10);this.state.resetOnNewDay&&(!JSON.parse(localStorage.getItem("happyDaysDates"))||JSON.parse(localStorage.getItem("happyDaysDates"))&&!JSON.parse(localStorage.getItem("happyDaysDates"))[t])&&(this.setState({isHappyWithDay:!1,happyNotes:"",sadNotes:"",activities:[]}),localStorage.setItem("activities",[]),localStorage.setItem("happyNotes",""),localStorage.setItem("sadNotes",""),localStorage.setItem("isHappyWithDay",!1)),(!JSON.parse(localStorage.getItem("happyDaysDates"))||JSON.parse(localStorage.getItem("happyDaysDates"))&&!JSON.parse(localStorage.getItem("happyDaysDates"))[t])&&(this.setState({isHappyWithDay:!1}),localStorage.setItem("isHappyWithDay",!1));var a=this;setInterval(function(){localStorage.setItem("activities",JSON.stringify(a.state.activities));var i=JSON.parse(JSON.stringify(a.state));delete i.happyDaysDates,e.state.happyDaysDates&&(e.state.happyDaysDates[t]=i),localStorage.setItem("happyDaysDates",JSON.stringify(e.state.happyDaysDates)),e.setState({happyDaysDates:e.state.happyDaysDates})},1e3),this.handleNotifications()}},{key:"nonPersistentNotification",value:function(e){if("Notification"in window)try{var t=new Notification(e);setTimeout(t.close.bind(t),5e3)}catch(a){console.log("Notification API error: "+a)}else console.log("Notification API not supported!")}},{key:"getTimeFromStrings",value:function(e,t,a){return e&&((e=e.toLowerCase()).includes("h")&&(t=Number(e.split("h")[0])),e.includes("m")&&(a=Number(e.split("m")[0]))),{hours:t,minutes:a}}},{key:"parseTimeStringToHourFloat",value:function(e){var t=e.split(" "),a=Object(r.a)(t,2),i=a[0],n=a[1],s=0,o=0,c={hours:0,minutes:0};return s=(c=this.getTimeFromStrings(i,s,o)).hours,o=c.minutes,(s=(c=this.getTimeFromStrings(n,s,o)).hours)+(o=c.minutes)/60}},{key:"changeHappyNotes",value:function(e){this.setState({happyNotes:e}),localStorage.setItem("happyNotes",e)}},{key:"changeSadNotes",value:function(e){this.setState({sadNotes:e}),localStorage.setItem("sadNotes",e)}},{key:"render",value:function(){var e=this,t=this.getProgressBarStatus(),a=t<80?"light-blue":t<95?"progress-bar-warning":"progress-bar-danger";return n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 col-sm-12"},n.a.createElement("div",{className:"col-md-8 col-sm-12"},n.a.createElement("header",null,n.a.createElement("h1",null,"Manage your day"),n.a.createElement("div",{className:"flex-container mg-bottom-5"},"Clean activites and notes on start of new day?",n.a.createElement("input",{className:"happy-day-checkbox",type:"checkbox",checked:this.state.resetOnNewDay,style:{marginLeft:5},onChange:function(t){e.state.resetOnNewDay?(e.setState({resetOnNewDay:!1}),localStorage.setItem("resetOnNewDay",!1)):(e.setState({resetOnNewDay:!0}),localStorage.setItem("resetOnNewDay",!0))}}))),n.a.createElement("label",null,"Your sleep hours"),n.a.createElement("input",{placeholder:"Sleep hours",type:"number",step:.1,max:24,min:0,className:"form-control input-sm",value:this.state.sleepHours,onChange:function(t){e.setState({sleepHours:Number(t.target.value)}),localStorage.setItem("sleepHours",Number(t.target.value))}}),n.a.createElement("label",null,"Add new activity"),n.a.createElement("div",{className:"flex-container"},n.a.createElement("input",{placeholder:"Time to spent (0h 0m)",type:"text",className:"form-control input-sm text-right",value:this.state.newActivityTimeString,style:{marginRight:5,width:"70px"},onChange:function(t){return e.handleNewActivityTime(t.target.value)}}),n.a.createElement("input",{placeholder:"Your activity description...",className:"form-control input-sm",style:{marginRight:5},value:this.state.newActivityDescription,onChange:function(t){return e.setState({newActivityDescription:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&e.addActivity()}}),n.a.createElement("button",{className:"btn btn-sm dark-blue pull-right",onClick:this.addActivity,style:{marginLeft:5,marginBottom:10}},"Add activity")),n.a.createElement("p",null,"Available hours to use: ",g(this.getTimeAvailable())),n.a.createElement("div",{style:{width:"100%",marginTop:10},className:"progress"},n.a.createElement("div",{className:"progress-bar ".concat(a),"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{width:"".concat(t,"%")}},n.a.createElement("span",null,t,"% elapsed"))),n.a.createElement("div",{className:"col-md-12 col-xs-12 no-pm"},n.a.createElement("h3",{className:"activities-title"},"Activities (",this.state.activities.filter(function(e){return e.isDone}).length,"/",this.state.activities.length,")"),n.a.createElement("button",{className:"btn btn-sm btn-danger pull-right",onClick:this.deleteActivities,style:{marginLeft:5,marginBottom:10}},"Clear all activites")),n.a.createElement("ul",{className:"list-group"},this.state.activities.map(function(t,a){return n.a.createElement("li",{key:a,className:"list-group-item flex-container dark-bg"},n.a.createElement("input",{className:"activity-checkbox",type:"checkbox",checked:t.isDone,style:{marginRight:5},onChange:function(a){t.isDone=!t.isDone,e.setState({})}}),n.a.createElement("input",{placeholder:"Time",className:"form-control input-sm text-right",value:t.timeString,style:{marginRight:5,width:"70px"},onChange:function(a){t.timeString=a.target.value,t.time=e.parseTimeStringToHourFloat(a.target.value),e.setState({})}}),n.a.createElement("input",{placeholder:"Description",className:"form-control input-sm",defaultValue:t.description,style:{marginRight:5,width:"100%"},onChange:function(a){t.description=a.target.value,e.setState({})}}),n.a.createElement("button",{className:"btn btn-sm btn-danger pull-right",onClick:function(){return e.deleteActivity(t)}},n.a.createElement("i",{className:"fa fa-trash"})))}))),n.a.createElement("div",{className:"col-md-4 col-sm-12"},n.a.createElement("h3",{className:"notes-title"},"Update these one at the end of your day to sum up your day"),n.a.createElement("div",{className:"flex-container mg-bottom-5"},"Are you happy with your day?",n.a.createElement("input",{className:"happy-day-checkbox",type:"checkbox",checked:this.state.isHappyWithDay,style:{marginLeft:5},onChange:function(t){e.state.isHappyWithDay?(e.setState({isHappyWithDay:!1}),localStorage.setItem("isHappyWithDay",!1)):(e.setState({isHappyWithDay:!0}),localStorage.setItem("isHappyWithDay",!0))}})),n.a.createElement("div",null,n.a.createElement("label",null,"Happy notes ",n.a.createElement("span",{className:"fa fa-smile-beam"})," (describe here things that happened and made you happy)"),n.a.createElement("textarea",{placeholder:"Happy notes",className:"form-control input-sm",value:this.state.happyNotes,onChange:function(t){return e.changeHappyNotes(t.target.value)}})),n.a.createElement("div",null,n.a.createElement("label",null,"Sadness notes ",n.a.createElement("span",{className:"fa fa-frown"})," (describe here things that happened and made you sad/angry)"),n.a.createElement("textarea",{placeholder:"Sad notes",className:"form-control input-sm",value:this.state.sadNotes,onChange:function(t){return e.changeSadNotes(t.target.value)}})),n.a.createElement("div",{className:"col-md-12 col-sm-12"},n.a.createElement("h4",null,"List of days you were happy - (if there are not too many - hey don't worry may you have just forgot to set a 'happy' checkbox ",n.a.createElement("span",{className:"fa fa-smile-beam"})," )"),n.a.createElement("div",{className:"happy-days-container"},Object.keys(this.state.happyDaysDates).map(function(t,a){return e.state.happyDaysDates[t].isHappyWithDay?n.a.createElement("span",{key:a},a>0&&", ",t):null})))))))}}]),t}(i.Component),f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(v,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/self-improver",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/self-improver","/service-worker.js");f?(function(e,t){fetch(e).then(function(a){var i=a.headers.get("content-type");404===a.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):N(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):N(t,e)})}}()}},[[11,2,1]]]);
//# sourceMappingURL=main.7241432c.chunk.js.map